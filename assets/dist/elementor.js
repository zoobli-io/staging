!function(e){"function"==typeof define&&define.amd?define("elementor",e):e()}(function(){"use strict";var l={text:"BaseData",textarea:"BaseData",number:"Number",wysiwyg:"Wysiwyg",color:"Color",date_time:"Date_time",url:"Url",media:"Media",gallery:"Gallery",icons:"Icons"};Object.keys(l).forEach(e=>{var t,i=elementor.modules.controls[l[e]];i?(t={onReady:i.prototype.onReady||(()=>{}),onBeforeDestroy:i.prototype.onBeforeDestroy||(()=>{})},elementor.addControlView(e,i.extend({onReady(){t.onReady.call(this),this.$el.prepend('<a href="#" class="enable-tags"><span>Enable Voxel tags</span></a>'),this.$el.find(".elementor-control-input-wrapper").before(`
				<div class="edit-voxel-tags" style="display: none;">
					<div class="tags-content"></div>
					<div class="dbuttons">
						<a href="#" class="edit-tags">Edit tags</a>
						<a href="#" class="disable-tags">Disable tags</a>
					</div>
				</div>
			`),DTags.isDynamicString(this._getDynamicValue())&&this._enableTags(),this.$el.on("click",".enable-tags",()=>{this._enableTags(),this._editTags()}),this.$el.on("click",".edit-tags",this._editTags.bind(this)),this.$el.on("click",".disable-tags",this._disableTags.bind(this))},onBeforeDestroy(){t.onBeforeDestroy.call(this),this.$el.off("click",".enable-tags",this._enableTags.bind(this)),this.$el.off("click",".edit-tags",this._editTags.bind(this)),this.$el.off("click",".disable-tags",this._disableTags.bind(this))},_getDynamicValue(){return this.getControlValue()},_setDynamicValue(e){this.setValue(e)},_editTags(){DTags.edit(DTags.getDynamicString(this._getDynamicValue()),e=>{this._setDynamicValue(`@tags()${e}@endtags()`),this.applySavedValue(),this.$el.find(".edit-voxel-tags .tags-content").html(DTags.formatAsHTML(e))})},_enableTags(){var e=DTags.getDynamicString(this._getDynamicValue());this._setDynamicValue(`@tags()${e}@endtags()`),this.applySavedValue(),this.$el.addClass("voxel-tags-active"),this.$el.find(".enable-tags").hide(),this.$el.find(".edit-voxel-tags .tags-content").html(DTags.formatAsHTML(e)),this.$el.find(".edit-voxel-tags").show()},_disableTags(){confirm("Are you sure?")&&(this.$el.removeClass("voxel-tags-active"),this.$el.find(".enable-tags").show(),this.$el.find(".edit-voxel-tags").hide(),this._setDynamicValue(""),this.applySavedValue())}}))):console.warn(`Control module for "${e}" does not exist.`)}),elementor.modules.controls.Color.prototype.applySavedValue=function(){var e,t=this.getCurrentValue();this.colorPicker?t?(e=this.colorPicker.picker._parseLocalColor(t),this.colorPicker.picker.setHSVA(...e.values||[],!1)):this.colorPicker.picker._clearColor(!0):this.initPicker(),this.$el.toggleClass("e-control-color--no-value",!t)},elementor.modules.controls.Url.prototype._getDynamicValue=function(){return this.getControlValue().url},elementor.modules.controls.Url.prototype._setDynamicValue=function(e){return this.setValue("url",e)},elementor.modules.controls.Media.prototype._getDynamicValue=function(){return this.getControlValue().id},elementor.modules.controls.Media.prototype._setDynamicValue=function(e){return this.setValue("id",e)},elementor.modules.controls.Gallery.prototype._getDynamicValue=function(){return this.getControlValue()[0]?.id||[]},elementor.modules.controls.Gallery.prototype._setDynamicValue=function(e){return this.setValue([{id:e,url:" "}])},elementor.modules.controls.Icons.prototype._getDynamicValue=function(){return this.getControlValue().value},elementor.modules.controls.Icons.prototype._setDynamicValue=function(e){return this.setValue({value:e,library:" "})},elementor.modules.controls.Select2.prototype.handleLockedOptions=function(){const t=this.model.get("lockedOptions");t&&this.ui.select.on("select2:unselecting",e=>{t.includes(e.params.args.data.id)&&e.preventDefault()});var i=this.ui.select,e=i.next(".select2-container").first("ul.select2-selection__rendered");e.on("click touchstart",e=>{$(e.target).hasClass("select2-selection__choice__remove")&&e.stopImmediatePropagation()}),e.sortable({placeholder:"ui-state-highlight",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",containment:"parent",stop:()=>{$(e.find(".select2-selection__choice").get().reverse()).each((e,t)=>{var t=$(t).find("._s2-value").data("value");t&&(t=i.find('option[value="'+t+'"]')[0],i.prepend(t))}),this.ui.select.trigger("change")}})},elementor.modules.controls.Select2.prototype.getSelect2Options=function(){return $.extend(this.getSelect2DefaultOptions(),this.model.get("select2options"),{templateSelection:e=>$('<span class="_s2-value"></span>').data("value",e.id).text(e.text)})},elementor.addControlView("voxel-relation",elementor.modules.controls.BaseData.extend({onReady(){var e=this.model.get("vx_target"),s=this.model.get("vx_group"),n="right"===this.model.get("vx_side")?"right":"left",a="right"==n?"left":"right",t=elementor.$previewContents.find(".elementor-widget."+e),r=this.$el.find(".vx-relation-list"),e=e.replace("elementor-widget-",""),c=Vue.capitalize(Vue.camelize(e.replace("ts-",""))),d=this.options.container.id;elementor.config.voxel.relations[s]||(elementor.config.voxel.relations[s]=[]),t.each((e,t)=>{var i=t.dataset.id,l=!!elementor.config.voxel.relations[s].find(e=>e[n]===d&&e[a]===i),o=$(`
                <div class="relation-item ${l?"selected":""}">
                    <span>&lt;${c} <code>#${i}</code>&gt;</span>
                    <i class="las la-eye view-icon"></i>
                    <i class="las la-check check-icon"></i>
                </div>
            `);o.on("mouseenter",()=>t.classList.add("voxel-highlight-element")),o.on("mouseleave",()=>t.classList.remove("voxel-highlight-element")),o.on("click",".view-icon",e=>{e.stopPropagation(),Voxel_Backend.helpers.isAnyPartOfElementInViewport(t)||t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}),o.on("click",()=>{o.toggleClass("selected").siblings().removeClass("selected"),this.setValue(null),elementor.config.voxel.relations[s]=elementor.config.voxel.relations[s].filter(e=>e[n]!==d),o.hasClass("selected")&&(elementor.config.voxel.relations[s]=elementor.config.voxel.relations[s].filter(e=>e[a]!==i),elementor.config.voxel.relations[s].push({left:"left"==n?d:i,right:"left"==n?i:d}))}),r.append(o)}),r.find(".relation-item").length||r.html(`<div class="relation-item">No &lt;${c}&gt; widgets found.</div>`)}})),elementor.addControlView("voxel-visibility",elementor.modules.controls.BaseData.extend({onReady(){this._updatePreview(),this.$el.find(".vx-visibility-edit a").on("click",()=>{DTags.editVisibility(this.getControlValue(),e=>{this.setValue(e.length?e:null),this.applySavedValue(),this._updatePreview()})})},_updatePreview(){var e=this.getControlValue();this.$el.find(".vx-visibility-rules").html(DTags.formatRulesAsHTML(e))}})),window.voxel_handle_tags=i=>(Object.keys(i).forEach(e=>{var t;"string"==typeof i[e]&&DTags.isDynamicString(i[e])&&(t=DTags.getDynamicString(i[e]),i[e]=`<span class="dtags-elementor" dtags>${DTags.formatAsText(t)}</span>`)}),i),elementor.hooks.addFilter("elements/widget/behaviors",e=>(e.InlineEditing.behaviorClass.prototype.onInlineEditingClick=function(e){var t=this,i=jQuery(e.currentTarget);i.find("[dtags]").length||setTimeout(function(){t.startEditing(i)},30)},e)),$e.components.get("document/save").on("save",e=>{function l(e){var i=[];return i.push(e.parent().find("> .elementor-element").index(e)),e.parents("[data-id]").each((e,t)=>{i.push(jQuery(t).parent().find("> .elementor-element").index(t))}),i.reverse().join(".")}var t=elementor.config.voxel.relations;Object.keys(t).forEach(e=>{t[e].filter(e=>{var t=elementor.$previewContents.find(".elementor-element-"+e.left),i=elementor.$previewContents.find(".elementor-element-"+e.right);return!(!t.length||!i.length)&&(e.leftPath=l(t),e.rightPath=l(i),!0)})}),elementorCommon.ajax.addRequestConstant("voxel",JSON.stringify({relations:t}))});{let t=Voxel_Elementor_Config;return void(t&&t.is_preview_card&&(document.body.classList.add("vx-editing-preview-card"),elementor.once("preview:loaded",()=>{let e=elementor.$preview.contents();e.find("body").addClass("vx-viewport-card"),e.find(".elementor.elementor-"+t.header_id).hide(),e.find(".elementor.elementor-"+t.footer_id).hide(),e.find("#query-monitor-main, .grecaptcha-badge").hide()})))}});
