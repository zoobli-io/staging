!function(t){"function"==typeof define&&define.amd?define("googleMaps",t):t()}(function(){"use strict";Voxel.Maps.Autocomplete=function(t,e){this.init(t,e)},Voxel.Maps.Bounds=function(t,e){this.southwest=t,this.northeast=e,this.init(t,e)},Voxel.Maps.Bounds.prototype.extend=function(t){},Voxel.Maps.Bounds.prototype.empty=function(){},Voxel.Maps.Bounds.prototype.getSourceObject=function(){},Voxel.Maps.Bounds.prototype.getSouthWest=function(){return this.southwest},Voxel.Maps.Bounds.prototype.getNorthEast=function(){return this.northeast},Voxel.Maps.Geocoder=function(){this.init()},Voxel.Maps.getGeocoder=function(){return Voxel.Maps._geocoder||(Voxel.Maps._geocoder=new Voxel.Maps.Geocoder),Voxel.Maps._geocoder},Voxel.Maps.Geocoder.prototype.geocode=function(t,e,o){},Voxel.Maps.Geocoder.prototype.formatFeature=function(t){},Voxel.Maps.Geocoder.prototype.getUserLocation=function({fetchAddress:e=!0,receivedPosition:o=t=>{},receivedAddress:n=t=>{},positionFail:t=()=>{},addressFail:p=()=>{}}={}){if(!navigator.geolocation)return t();navigator.geolocation.getCurrentPosition(t=>{t=new Voxel.Maps.LatLng(t.coords.latitude,t.coords.longitude);o(t),!1!==e&&Voxel.Maps.getGeocoder().geocode(t.toGeocoderFormat(),t=>t?n(t):(Voxel.alert("Couldn't determine your location.","error"),p()))},()=>t())},Voxel.Maps.LatLng=function(t,e){this.init(t,e)},Voxel.Maps.LatLng.prototype.getLatitude=function(){},Voxel.Maps.LatLng.prototype.getLongitude=function(){},Voxel.Maps.LatLng.prototype.getSourceObject=function(){},Voxel.Maps.LatLng.prototype.toGeocoderFormat=function(){},Voxel.Maps.Map=function({el:t,zoom:e=10,center:o=new Voxel.Maps.LatLng(42,20),minZoom:n=4,maxZoom:p=16,draggable:a=!0}){this.init({el:t,zoom:e,center:o,minZoom:n,maxZoom:p,draggable:a})},Voxel.Maps.Map.prototype.setZoom=function(t){},Voxel.Maps.Map.prototype.getZoom=function(){},Voxel.Maps.Map.prototype.getMinZoom=function(){},Voxel.Maps.Map.prototype.getMaxZoom=function(){},Voxel.Maps.Map.prototype.setCenter=function(t){},Voxel.Maps.Map.prototype.getCenter=function(){},Voxel.Maps.Map.prototype.fitBounds=function(t){},Voxel.Maps.Map.prototype.panTo=function(t){},Voxel.Maps.Map.prototype.getClickPosition=function(t){},Voxel.Maps.Map.prototype.addListener=function(t,e){},Voxel.Maps.Map.prototype.addListenerOnce=function(t,e){},Voxel.Maps.Map.prototype.trigger=function(t){},Voxel.Maps.Map.prototype.mapEvent=function(t){return void 0!==this.eventMap[t]?this.eventMap[t]:t},Voxel.Maps.Map.prototype.removeMarkers=function(){for(var t=0;t<this.markers.length;t++)this.markers[t].remove();this.markers=[]},Voxel.Maps.Map.prototype.getSourceObject=function(){},Voxel.Maps.Marker=function({map:t=null,position:e=null,onClick:o=null,template:n=null}){this.template=n,this.init({map:t,position:e,onClick:o})},Voxel.Maps.Marker.prototype.getPosition=function(){},Voxel.Maps.Marker.prototype.setPosition=function(t){},Voxel.Maps.Marker.prototype.getMap=function(){},Voxel.Maps.Marker.prototype.setMap=function(t){},Voxel.Maps.Marker.prototype.remove=function(){},Voxel.Maps.Marker.prototype.getTemplate=function(){var t=this.template||'<div class="map-marker marker-type-icon"><i class="las la-map-marker"></i></div>';return jQuery(`<div class="marker-wrapper">${t}</div>`)},Voxel.Maps.Popup=function({map:t=null,position:e=null,content:o=null}){this.init({map:t,position:e,content:o})},Voxel.Maps.Popup.prototype.init=function(t){},Voxel.Maps.Popup.prototype.setContent=function(t){},Voxel.Maps.Popup.prototype.setPosition=function(t){},Voxel.Maps.Popup.prototype.setMap=function(t){},Voxel.Maps.Popup.prototype.show=function(){},Voxel.Maps.Popup.prototype.hide=function(){},Voxel.Maps.Autocomplete.prototype.init=function(t,e){!t instanceof Element||(this.el=t,this.input=jQuery(this.el),this.options={fields:["geometry.location","geometry.viewport","formatted_address"]},this.autocomplete=new google.maps.places.Autocomplete(this.el,this.options),this.input.on("input",t=>{e()}),this.autocomplete.addListener("place_changed",()=>{e(Voxel.Maps.getGeocoder().formatFeature(this.autocomplete.getPlace()))}))},Voxel.Maps.Bounds.prototype.init=function(t,e){this.southwest=t,this.northeast=e,this.bounds=new google.maps.LatLngBounds(t.getSourceObject(),e.getSourceObject())},Voxel.Maps.Bounds.prototype.getSouthWest=function(){return this.southwest},Voxel.Maps.Bounds.prototype.getNorthEast=function(){return this.northeast},Voxel.Maps.Bounds.prototype.extend=function(t){this.bounds.extend(t.getSourceObject())},Voxel.Maps.Bounds.prototype.empty=function(){return this.bounds.isEmpty()},Voxel.Maps.Bounds.prototype.getSourceObject=function(){return this.bounds},Voxel.Maps.Geocoder.prototype.init=function(){this.geocoder=new google.maps.Geocoder},Voxel.Maps.Geocoder.prototype.geocode=function(t,o,n){var p=this,a=!1,e={};if(t instanceof google.maps.LatLng)e.location=t;else{if("string"!=typeof t||!t.length)return n(a);e.address=t}"function"==typeof o&&(n=o,o={});o=jQuery.extend({limit:1},o);this.geocoder.geocode(e,(t,e)=>{if("OK"===e&&t&&t.length)return a=1===o.limit?p.formatFeature(t[0]):t.map(this.formatFeature),n(a);console.log("Geocoding failed. ["+e+"]")})},Voxel.Maps.Geocoder.prototype.formatFeature=function({geometry:{location:t,viewport:e},formatted_address:o}){return{address:o,latlng:new Voxel.Maps.LatLng(t.lat(),t.lng()),viewport:new Voxel.Maps.Bounds(new Voxel.Maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),new Voxel.Maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()))}},Voxel.Maps.LatLng.prototype.init=function(t,e){this.latlng=new google.maps.LatLng(t,e)},Voxel.Maps.LatLng.prototype.getLatitude=function(){return this.latlng.lat()},Voxel.Maps.LatLng.prototype.getLongitude=function(){return this.latlng.lng()},Voxel.Maps.LatLng.prototype.getSourceObject=function(){return this.latlng},Voxel.Maps.LatLng.prototype.toGeocoderFormat=function(){return this.latlng},Voxel.Maps.Map.prototype.init=function({el:t,zoom:e,center:o,minZoom:n,maxZoom:p,draggable:a}){this.eventMap={},this.map=new google.maps.Map(t,{zoom:e,minZoom:n,maxZoom:p,draggable:a,navigationControl:!0,mapTypeControl:!1,streetViewControl:!1,zoomControl:!0,controlSize:32,styles:[{featureType:"all",elementType:"labels.text",stylers:[{color:"#878787"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f9f5ed"}]},{featureType:"road.highway",elementType:"all",stylers:[{color:"#f5f5f5"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"all",stylers:[{color:"#aee0f4"}]}]}),this.setCenter(o)},Voxel.Maps.Map.prototype.setZoom=function(t){this.map.setZoom(t)},Voxel.Maps.Map.prototype.getZoom=function(){return this.map.getZoom()},Voxel.Maps.Map.prototype.getMinZoom=function(){return this.map.minZoom},Voxel.Maps.Map.prototype.getMaxZoom=function(){return this.map.maxZoom},Voxel.Maps.Map.prototype.setCenter=function(t){this.map.setCenter(t.getSourceObject())},Voxel.Maps.Map.prototype.getCenter=function(){return new Voxel.Maps.LatLng(this.map.center.lat(),this.map.center.lng())},Voxel.Maps.Map.prototype.getBounds=function(){let t=this.map.getBounds();return new Voxel.Maps.Bounds(new Voxel.Maps.LatLng(t.getSouthWest()),new Voxel.Maps.LatLng(t.getNorthEast()))},Voxel.Maps.Map.prototype.fitBounds=function(t){this.map.fitBounds(t.getSourceObject())},Voxel.Maps.Map.prototype.panTo=function(t){this.map.panTo(t.getSourceObject())},Voxel.Maps.Map.prototype.getClickPosition=function(t){return new Voxel.Maps.LatLng(t.latLng.lat(),t.latLng.lng())},Voxel.Maps.Map.prototype.addListener=function(t,e){google.maps.event.addListener(this.map,this.mapEvent(t),t=>e(t))},Voxel.Maps.Map.prototype.addListenerOnce=function(t,e){google.maps.event.addListenerOnce(this.map,this.mapEvent(t),t=>e(t))},Voxel.Maps.Map.prototype.trigger=function(t){google.maps.event.trigger(this.map,this.mapEvent(t))},Voxel.Maps.Map.prototype.getSourceObject=function(){return this.map},Voxel.Maps.Marker.prototype.init=function({map:t,position:e,onClick:o}){this.marker=new Voxel.Maps.GoogleMapsOverlay(this),this.onClick=o,t&&this.setMap(t),e&&this.setPosition(e)},Voxel.Maps.Marker.prototype.getPosition=function(){return this.position},Voxel.Maps.Marker.prototype.setPosition=function(t){this.position=t,this.marker.setPosition(t?.getSourceObject())},Voxel.Maps.Marker.prototype.getMap=function(){return this.map},Voxel.Maps.Marker.prototype.setMap=function(t){this.map=t,this.marker.setMap(t.getSourceObject())},Voxel.Maps.Marker.prototype.remove=function(){return this.marker.setMap(null),this.marker.remove(),this},Voxel.Maps.Marker.prototype.getSourceObject=function(){return this.marker},Voxel.Maps.SetupMarkerOverlay=()=>{Voxel.Maps.GoogleMapsOverlay=function(t){this.marker=t,this.template=t.getTemplate(),this.latlng=t.getPosition()?.getSourceObject()},Voxel.Maps.GoogleMapsOverlay.prototype=new google.maps.OverlayView,Voxel.Maps.GoogleMapsOverlay.prototype.draw=function(){this.node||(this.node=this.template.get(0),this.node.addEventListener("click",t=>{this.marker.onClick&&this.marker.onClick(t,this.marker)}),this.getPanes().overlayImage.appendChild(this.node)),this.setPosition(this.latlng)},Voxel.Maps.GoogleMapsOverlay.prototype.remove=function(){this.node&&this.node.remove(),this.node=null},Voxel.Maps.GoogleMapsOverlay.prototype.getPosition=function(){return this.latlng},Voxel.Maps.GoogleMapsOverlay.prototype.getDraggable=function(){return!1},Voxel.Maps.GoogleMapsOverlay.prototype.getVisible=function(){return!0},Voxel.Maps.GoogleMapsOverlay.prototype.setPosition=function(t){this.latlng=t,this.node&&(this.latlng?(t=this.getProjection().fromLatLngToDivPixel(this.latlng),this.node.style.left=t.x+"px",this.node.style.top=t.y+"px",this.node.style.visibility="visible"):this.node.style.visibility="hidden")}},Voxel.Maps.Popup.prototype.init=function({map:t,position:e,content:o}){this.popup=new google.maps.InfoWindow,this.map=t,e&&this.setPosition(e),o&&this.setContent(o),google.maps.event.addListener(this.popup,"domready",()=>{this.popup.content.closest(".gm-style-iw-a").classList.add("ts-marker")})},Voxel.Maps.Popup.prototype.setContent=function(t){this.popup.setContent(t)},Voxel.Maps.Popup.prototype.setPosition=function(t){this.popup.setPosition(t.getSourceObject())},Voxel.Maps.Popup.prototype.setMap=function(t){this.map=t},Voxel.Maps.Popup.prototype.show=function(){this.popup.open(this.map.getSourceObject())},Voxel.Maps.Popup.prototype.hide=function(){this.popup.close()},Voxel.Maps.GoogleMaps=function(){Voxel.Maps.SetupMarkerOverlay(),Voxel.Maps.Loaded=!0,document.dispatchEvent(new Event("maps:loaded"))},jQuery(document).on("maps:loaded",()=>{jQuery(".ts-map.ts-map-autoload").each((t,e)=>{let o=jQuery(e),n=o.data("config"),p={el:e,zoom:3},a=(n&&(n.zoom&&(p.zoom=n.zoom),n.minZoom&&(p.minZoom=n.minZoom),n.maxZoom&&(p.maxZoom=n.maxZoom),n.center&&(p.center=new Voxel.Maps.LatLng(n.center.lat,n.center.lng))),new Voxel.Maps.Map(p));n.markers&&n.markers.forEach(t=>{new Voxel.Maps.Marker({map:a,position:new Voxel.Maps.LatLng(t.lat,t.lng),template:t.template})})})})});
